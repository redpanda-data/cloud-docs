# Search Jira issues using JQL
# Requires Enterprise license
# tag::complete[]
label: search-jira

processors:
  - generate:
      count: 1
      mapping: |
        root.jql = this.jql
        root.maxResults = this.max_results.or(50)
        root.fields = ["key", "summary", "status", "assignee", "priority"]
  - jira:
      base_url: "${secrets.JIRA_BASE_URL}"
      username: "${secrets.JIRA_USERNAME}"
      api_token: "${secrets.JIRA_API_TOKEN}"

meta:
  mcp:
    enabled: true
    description: "Search Jira issues using JQL. Returns matching issues with key, summary, status, assignee, and priority."
    properties:
      - name: jql
        type: string
        description: "JQL query (e.g., 'project = DOC AND status = Open')"
        required: true
      - name: max_results
        type: number
        description: "Maximum issues to return (default: 50)"
        required: false
# end::complete[]
