# Example: Multi-Agent Configuration (Root + Subagents)
# This is a conceptual example showing how a multi-agent architecture might be configured.
# Actual configuration is done through the Redpanda Cloud Console UI.

# Root Agent - Orchestrates and delegates to subagents
root_agent:
  name: ecommerce-orchestrator
  description: Orchestrates e-commerce operations across specialized agents

  model:
    provider: anthropic
    name: claude-opus-4
    temperature: 0.2

  system_prompt: |
    You are an e-commerce orchestration agent. You coordinate operations
    across three specialized agents: Order, Inventory, and Customer.

    Available subagents:
    - order_agent: Manages order operations
    - inventory_agent: Manages stock and inventory
    - customer_agent: Manages customer profiles

    Your job is to:
    1. Understand user requests
    2. Determine which subagent(s) to call
    3. Combine results into coherent responses

    Rules:
    - Delegate to subagents rather than calling tools directly
    - Wait for subagent responses before proceeding
    - Handle errors from subagents gracefully

  # Root agent has delegation tools
  mcp_servers:
    - name: agent-delegation
      tools:
        - call_order_agent
        - call_inventory_agent
        - call_customer_agent

  subagents:
    - order_agent
    - inventory_agent
    - customer_agent

  max_iterations: 15

# Subagent 1: Order Agent
order_agent:
  name: order-agent
  description: Handles order management operations

  model:
    provider: openai
    name: gpt-4o

  system_prompt: |
    You are an order management agent. You handle order retrieval,
    status updates, and order calculations.

    Available tools:
    - get_order
    - update_order_status
    - calculate_total

    Rules:
    - Always validate order IDs before operations
    - Never modify orders marked as completed

  mcp_servers:
    - name: order-tools
      tools:
        - get_order
        - update_order_status
        - calculate_total

  max_iterations: 5

# Subagent 2: Inventory Agent
inventory_agent:
  name: inventory-agent
  description: Handles inventory and stock management

  model:
    provider: openai
    name: gpt-4o

  system_prompt: |
    You are an inventory management agent. You check stock levels
    and manage inventory reservations.

    Available tools:
    - check_stock
    - reserve_inventory
    - release_inventory

    Rules:
    - Always verify product IDs exist before operations
    - Never reserve more than available stock

  mcp_servers:
    - name: inventory-tools
      tools:
        - check_stock
        - reserve_inventory
        - release_inventory

  max_iterations: 5

# Subagent 3: Customer Agent
customer_agent:
  name: customer-agent
  description: Handles customer profile and history

  model:
    provider: openai
    name: gpt-4o

  system_prompt: |
    You are a customer management agent. You retrieve customer
    profiles and order history.

    Available tools:
    - get_customer_profile
    - get_order_history
    - update_preferences

    Rules:
    - Never expose sensitive customer data (passwords, payment info)
    - Limit order history to last 100 orders by default

  mcp_servers:
    - name: customer-tools
      tools:
        - get_customer_profile
        - get_order_history
        - update_preferences

  max_iterations: 5

# Security
secrets:
  - name: openai-api-key
    reference: openai_key_secret
  - name: anthropic-api-key
    reference: anthropic_key_secret
