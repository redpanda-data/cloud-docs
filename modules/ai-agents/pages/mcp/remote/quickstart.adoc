= Remote MCP Server Quickstart
:page-beta: true
:description: Create and host a managed MCP server inside your Redpanda Cloud cluster.

include::ai-agents:partial$beta.adoc[]

{description}

== Prerequisites

* A Redpanda Cloud cluster and subscription with *Remote MCP* enabled
* Access to the xref:develop:connect/configuration/secret-management.adoc[Secrets Store] for storing credentials (if needed)
* At least version 25.2.5 of xref:manage:rpk/rpk-install.adoc[`rpk` installed on your computer]
* link:https://docs.anthropic.com/en/docs/claude-code/setup[Claude Code] installed

TIP: For a complete developer guide, see xref:ai-agents:mcp/remote/developer-guide.adoc[].

== Create a remote MCP Server in Redpanda Cloud

. Navigate to *Remote MCP*.
+
This page shows a list of existing servers.

. Click *Create new MCP Server*. In *Metadata* add:
+
* *Display Name*: A human-friendly name such as `crypto-inspector`. This name is shown in the Redpanda Cloud Console. It is not the name of the MCP server itself.
* *Description*: Explain what the server does. For example, `Fetches price history of cryptocurrencies from the CryptoCompare API`.
* *Tags*: Add key/value tags such as `owner=platform` or `env=prod`.
* *Resources*: Choose a size (XSmall / Small / Medium / Large / XLarge). Larger sizes allow more concurrent requests and faster processing, but cost more. You can change this later.

. Click *Next* to define a tool.

. Add the name of the tool, such as `btc_price_fetcher`. This is the name clients will use to call the tool. Make it descriptive so clients can discover it.

. Paste the following example YAML into the editor. This tool fetches Bitcoin price history from the CryptoCompare API. It accepts two optional parameters: `days` (number of days of history, default 30) and `currency` (target currency, default USD).
+
.Reveal pipeline YAML
[%collapsible]
====
[,yaml]
----
label: btc_price_fetcher <1>

processors:
  - label: prepare_parameters <2>
    mutation: |
      meta days = this.days.catch(30)
      meta currency = this.currency.catch("USD")
      meta api_endpoint = "https://min-api.cryptocompare.com/data/v2/histoday?fsym=BTC&tsym=" + @currency + "&limit=" + (@days).string()

  - label: fetch_data <3>
    http:
      url: '${! @api_endpoint }'
      verb: GET
      headers:
        Accept: "application/json"
        User-Agent: "redpanda-mcp-server/1.0"
      timeout: "30s"
      retries: 3
      retry_period: "5s"

  - label: format_response <4>
    mutation: |
      root = if this.Response == "Success" {
        {
          "success": true,
          "data": {
            "symbol": "BTC",
            "currency": @currency,
            "period_days": @days.number(),
            "total_records": this.Data.Data.length(),
            "prices": if this.Data.Data != null {
              this.Data.Data.map_each(entry -> {
                "date": (entry.time.number() * 1000).ts_format("2006-01-02", "UTC"),
                "timestamp": entry.time.number(),
                "open": entry.open.number(),
                "high": entry.high.number(),
                "low": entry.low.number(),
                "close": entry.close.number(),
                "volume_from": entry.volumefrom.number(),
                "volume_to": entry.volumeto.number()
              })
            } else { [] }
          },
          "metadata": {
            "source": "CryptoCompare API",
            "fetched_at": now().ts_format("2006-01-02T15:04:05.000Z", "UTC"),
            "api_response": this.Response
          }
        }
      } else {
        {
          "success": false,
          "error": "API request failed: " + this.Response.format_json(),
          "metadata": {
            "source": "CryptoCompare API",
            "fetched_at": now().ts_format("2006-01-02T15:04:05.000Z", "UTC")
          }
        }
      }

meta:
  mcp:
    enabled: true
    description: "Fetches Bitcoin price history from CryptoCompare API for the specified number of days (default 30)"
    properties:
      - name: days
        type: number
        description: "Number of days of historical data to fetch (default: 30, max: 2000)"
        required: false
      - name: currency
        type: string
        description: "Target currency for price data (default: USD)"
        required: false
----
<1> **label:** Names this processor config for identification.
<2> **prepare_parameters:** Sets up parameters (`days`, `currency`) with defaults and builds the API endpoint URL.
<3> **fetch_data:** Makes an HTTP GET request to the CryptoCompare API using the prepared endpoint.
<4> **format_response:** Formats the API response into a structured JSON object, handling both success and error cases.
====

. Click *Lint* to check the configuration. You should see no errors.

. Click *Create MCP Server* to deploy the server.
+
It may take a few seconds to start. the status changes from *Starting* to *Running* when it's ready.

. Open *MCP Inspector* tab to test the tool. Enter the request parameters such as `days=1` and `currency=USD`. Click *Run Tool*. You should see a response with Bitcoin price data.

== Connect a client

You can connect any MCP-compatible AI client to your remote MCP server. This example uses Claude Code.

The Redpanda CLI (`rpk`) acts as a local proxy, forwarding requests from your AI client to your own remote MCP server running in the Redpanda Cloud cluster.

. Log in to your Redpanda Cloud account:
+
[,bash]
----
rpk cloud login
----
+
This opens a browser window to authenticate. The token is saved locally inside your `rpk` configuration file. It is valid for 4 hours. You can refresh it by running `rpk cloud login` again.

. Open the *Connection* tab in Redpanda Cloud to get connection details and run the `rpk` command for Claude Code. It looks like this for BYOC and Dedicated clusters:
+
[,bash]
----
rpk cloud mcp proxy \
--cluster-id <cluster-id>\
--mcp-server-id <server-id> \
--install --client claude-code
----
+
For Serverless clusters, use:
+
[,bash]
----
rpk cloud mcp proxy \
--serverless-cluster-id <cluster-id>\
--mcp-server-id <server-id> \
--install --client claude-code
----

. Restart Claude Code and invoke your tool.
+
[,bash]
----
claude
----

. Ask Claude Code to run your tool. For example:
+
* "Fetch Bitcoin price history for the last 10 days in EUR."
* "Get BTC price data for 60 days in USD."

== Troubleshoot

=== MCP server not starting

If your server is not starting or shows an error state:

- Check the *Logs* tab for specific error messages.
- Verify your YAML syntax by clicking *Lint*.
- Ensure all required secrets are created in the Secrets Store.

=== Connection issues

If Claude Code can't connect to your server:

- Verify you're logged in with `rpk cloud login`.
- Check that your rpk version is 25.2.5 or later: `rpk version`.
- Ensure your server status shows *Running* in Redpanda Cloud.
- Try restarting Claude Code after running the proxy command.

=== API request failures

If the Bitcoin price tool returns errors:

- The CryptoCompare API may be rate limiting requests. Wait a minute and try again.
- Check your internet connection.
- Use the MCP Inspector in Redpanda Cloud to test with different parameters.

== Next steps

* xref:ai-agents:mcp/remote/developer-guide.adoc[]
