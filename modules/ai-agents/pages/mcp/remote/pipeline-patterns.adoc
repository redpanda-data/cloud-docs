= Patterns for Remote MCP Servers
:description: Catalog of patterns for Remote MCP server tools in Redpanda Cloud.

This page provides a reference catalog of patterns designed for use with Remote MCP servers in Redpanda Cloud. Use these patterns as building blocks for your own MCP tools. For step-by-step instructions on building, deploying, and testing MCP servers, see xref:ai-agents:mcp/remote/developer-guide.adoc[].

Each pattern is a reusable example for a common MCP tool scenario. Patterns are grouped by use case. All YAML is ready to use in your MCP server project.

For a high-level overview of MCP servers, see xref:ai-agents:mcp/overview.adoc[].

== Pattern selection guide

Choose the right pattern for your use case:

* **Generate test data or synthetic events**: <<data-generators>>
* **Call external REST APIs**: <<external-api-calls>>
* **Query databases**: <<database-queries>>
* **Read from Redpanda topics**: <<data-consumers>>
* **Transform or validate data**: <<data-transformation>>
* **Publish to Redpanda topics**: <<data-publishers>>
* **Integrate with AI/LLM services**: <<aillm-integration>>
* **Cache frequently accessed data**: <<caching-systems>>

== Data generators

Use xref:develop:connect/components/inputs/about.adoc[`inputs`] to create tools that read data from internal or external systems or generate sample data for testing and development.

**When to use:** Development and testing environments where you need synthetic data, load testing scenarios, or demonstrating data flows without real data sources.

**Example use cases:** Mock user events, test order data, synthetic sensor readings, demo data for presentations.

This example generates a realistic user event message:

[source,yaml]
----
include::ai-agents:example$generate_input.yaml[]
----

See also: xref:develop:connect/components/inputs/generate.adoc[`generate` input component]

== External API calls

Use xref:develop:connect/components/processors/about.adoc[`processors`] to fetch data from external APIs, databases, or services and return formatted results. This is one of the most common patterns for MCP tools.

**When to use:** Integrating with third-party services, fetching real-time data, calling internal microservices, or enriching event data with external information.

**Example use cases:** Fetch user profile from CRM, get product pricing from inventory API, validate addresses with geocoding service, retrieve weather data.

[source,yaml]
----
include::ai-agents:example$http_processor.yaml[]
----

See also: xref:develop:connect/components/processors/http.adoc[`http` processor], xref:develop:connect/components/processors/mutation.adoc[`mutation` processor]

== Database queries

Query external databases and return structured results. This pattern is essential for tools that need to access business data.

**When to use:** Retrieving customer records, querying analytics data, looking up configuration values, or joining streaming data with dimensional data from data warehouses.

**Example use cases:** Fetch customer details from PostgreSQL, query sales data from BigQuery, retrieve product catalog from MongoDB, look up reference data.

[source,yaml]
----
include::ai-agents:example$gcp_bigquery_select_processor.yaml[]
----

See also: xref:develop:connect/components/processors/gcp_bigquery_select.adoc[`gcp_bigquery_select` processor], xref:develop:connect/components/processors/sql_select.adoc[`sql_select` processor] (for other databases)

== Data consumers

Read messages from Redpanda topics to process streaming data in your MCP tools. This pattern enables event-driven workflows and real-time data processing.

**When to use:** Processing events from Redpanda topics, building event-driven AI agents, consuming audit logs, or subscribing to data change streams.

**Example use cases:** Monitor order events, process user activity streams, consume IoT sensor data, react to system notifications.

[source,yaml]
----
redpanda:
  seed_brokers: [ "${REDPANDA_BROKERS}" ]
  topics: [ "user-events" ]
  consumer_group: "mcp-event-processor"
  start_from_oldest: true
  tls:
    enabled: true
  sasl:
    - mechanism: "${REDPANDA_SASL_MECHANISM}"
      username: "${REDPANDA_SASL_USERNAME}"
      password: "${REDPANDA_SASL_PASSWORD}"
----

See also: xref:develop:connect/components/inputs/redpanda.adoc[`redpanda` input]

== Data transformation

Transform, validate, and enrich data as it flows through your MCP tools. Use Bloblang mapping language for powerful data manipulation.

**When to use:** Converting data formats, validating schemas, filtering events, enriching messages with computed fields, or normalizing data structures.

**Example use cases:** Parse JSON payloads, validate required fields, add timestamps, convert units, mask sensitive data, aggregate nested objects.

[source,yaml]
----
mapping: |
  # Parse and validate incoming data
  root.user_id = this.user_id.or(throw("user_id is required"))
  root.timestamp = now().ts_format("2006-01-02T15:04:05Z07:00")

  # Transform and enrich
  root.email_domain = this.email.split("@").index(1)
  root.is_premium = this.subscription_tier == "premium"

  # Filter sensitive data
  root.profile = this.profile.without("ssn", "credit_card")
----

See also: xref:develop:connect/components/processors/mapping.adoc[`mapping` processor], xref:develop:connect/guides/bloblang/about.adoc[Bloblang guide]

== AI/LLM integration

Integrate AI and LLM services into your MCP tools for intelligent data processing, embeddings generation, and natural language understanding.

**When to use:** Generating embeddings for semantic search, calling LLM APIs for text generation, building RAG (Retrieval Augmented Generation) pipelines, or analyzing sentiment.

**Example use cases:** Generate embeddings for documents, classify customer feedback, summarize long text, extract entities, answer questions with context.

=== OpenAI integration

[source,yaml]
----
openai_chat_completion:
  api_key: "${secrets.OPENAI_API_KEY}"
  model: "gpt-4"
  prompt: |
    Analyze this customer feedback and provide:
    1. Sentiment (positive/negative/neutral)
    2. Key themes
    3. Actionable insights

    Feedback: ${! json("feedback_text") }
  max_tokens: 500
----

See also: xref:develop:connect/components/processors/openai_chat_completion.adoc[`openai_chat_completion`], xref:develop:connect/components/processors/openai_embeddings.adoc[`openai_embeddings`]

=== Embeddings generation

[source,yaml]
----
openai_embeddings:
  api_key: "${secrets.OPENAI_API_KEY}"
  model: "text-embedding-3-small"
  text: ${! json("content") }
----

See also: xref:develop:connect/components/processors/cohere_embeddings.adoc[`cohere_embeddings`], xref:develop:connect/components/processors/gcp_vertex_ai_embeddings.adoc[`gcp_vertex_ai_embeddings`]

== Redpanda integration

Publish data to Redpanda topics and implement caching systems backed by Redpanda.

Use these patterns when you need to integrate with Redpanda infrastructure, publish data to topics, or implement caching systems.

=== Data publishers

Use xref:develop:connect/components/outputs/about.adoc[`outputs`] to send data to external systems, publish events to Redpanda topics, or integrate with downstream services.

**When to use:** Publishing events to Redpanda for consumption by other services, creating event sourcing patterns, building audit trails, or triggering downstream workflows.

**Example use cases:** Publish order confirmations, emit audit events, trigger notifications, create event-driven workflows.

This example publishes a message to a Redpanda topic:

[source,yaml]
----
include::ai-agents:example$redpanda_output.yaml[]
----

See also: xref:develop:connect/components/outputs/redpanda.adoc[`redpanda` output]

=== Caching systems

Use caching to store frequently accessed data, reduce latency, and minimize external API calls. You can implement caching using either Redpanda topics or in-memory stores.

**When to use:** Reducing repeated API calls, storing lookup tables, caching database query results, or maintaining session state across tool invocations.

**Example use cases:** Cache user profiles, store API rate limit counters, maintain configuration values, cache product catalogs.

**Redpanda-backed cache:**

[source,yaml]
----
include::ai-agents:example$redpanda_cache.yaml[]
----

**In-memory cache** for low-latency access to small datasets:

[source,yaml]
----
include::ai-agents:example$memory_cache.yaml[]
----

See also: xref:develop:connect/components/caches/memory.adoc[`memory` cache], Redpanda-backed cache using xref:develop:connect/components/outputs/redpanda.adoc[`redpanda` output]

// Production workflows section - single-sourced from rp-connect-docs partials
// Part 1: Parameter validation, dynamic config, error handling, conditional processing
include::redpanda-connect:ai-agents:partial$mcp/production-workflows-before-secrets.adoc[]

// Secrets section - deployment-specific for Cloud (uses Secrets Store)
include::redpanda-connect:ai-agents:partial$mcp/secrets-cloud.adoc[]

// Part 2: Monitoring, multi-step enrichment, workflow orchestration
include::redpanda-connect:ai-agents:partial$mcp/production-workflows-after-secrets.adoc[]

== Suggested reading

* xref:develop:connect/components/about.adoc[Components overview]
* xref:develop:connect/guides/bloblang/about.adoc[Bloblang guide]
* xref:develop:connect/configuration/secret-management.adoc[Secret management]