= Build Remote MCP Servers in Redpanda Cloud
:description: Learn how to write and deploy MCP servers in Redpanda Cloud. This guide covers concepts, patterns, and best practices.


This guide teaches you how to build xref:ai-agents:mcp/remote/overview.adoc[Remote MCP servers] that are managed in Redpanda Cloud. MCP servers run inside your Redpanda Cloud cluster and expose tools that AI clients can call using MCP.

== Prerequisites

* Access to a Redpanda Cloud cluster
* Ability to manage the xref:develop:connect/configuration/secret-management.adoc[Secrets Store] entries
* At least version 25.2.5 of xref:manage:rpk/rpk-install.adoc[`rpk` installed on your computer]
* (Optional) An AI assistant like Claude or Claude Code for testing

TIP: For a quickstart, see xref:ai-agents:mcp/remote/quickstart.adoc[].

You should also be familiar with YAML, HTTP APIs, and basic event-stream processing concepts.

== Concepts and architecture

Remote MCP server:: A managed, hosted MCP service deployed to your cluster. You write each tool's logic using Redpanda Connect configuration and annotate them with MCP metadata so clients can discover and invoke them.

Redpanda Connect:: A framework for building event-driven data pipelines. Tools inside your MCP servers are implemented as Redpanda Connect configurations that run inside your Redpanda Cloud cluster.

Tool:: A single request/response operation exposed to MCP.

Secrets:: Credentials and tokens that you want to use in your tools. These values must be stored in the Secrets Store and referenced as `${secrets.NAME}`. Use uppercase snakecase for secret names (such as `DATAPLANE_TOKEN`).

== Development workflow

. <<access, Create MCP server and configure metadata>>: Navigate to Remote MCP in Redpanda Cloud Console, create a new server, and configure server metadata (display name, description, tags, resources, service account).
. <<contract, Design the tool contract>>: Annotate MCP metadata with `meta.mcp.enabled: true`, provide a concise description, and declare parameters.
. <<provision-secrets, Provision secrets (optional)>>: Create secrets in the Secrets Store for any credentials. Never inline secrets in YAML.
. <<pipeline-patterns, Build your MCP tool>>: Build your MCP tool using Redpanda Connect components.
. <<lint, Lint and deploy>>: Validate your configuration, catch schema errors, then deploy and test with the MCP Inspector.
. <<test, Authenticate and connect your MCP client>>: Install a proxy entry with `rpk cloud mcp proxy` in your AI assistant MCP configuration, or connect with your own MCP client.
. <<observe, Observe and debug>>: Add temporary `log` processors, adjust timeouts/retries, and right-size resources.

[[access]]
== Create MCP server and configure metadata

. Log into your link:https://cloud.redpanda.com[Redpanda Cloud Console^].
. Select your cluster from the cluster list.
. In the left sidebar, navigate to *Remote MCP*.
. If this is your first MCP server, you'll see an empty list with a *Create MCP Server* button.
. Click *Create MCP Server* and configure the *Server Metadata*:
+
* *Display Name*: A human-friendly name for your server (for example `weather-tool`, `customer-lookup`).
* *Description*: Brief description of what your server does.
* *Tags*: Key-value pairs for organizing and categorizing your MCP servers. See <<tags>> for details.
* *Resources*: Choose the compute resources (XSmall through XLarge) based on your expected workload.
* *Service Account*: A service account name is pre-filled and will be created automatically.
+
. Click *Next* to define your tools using YAML configuration. See <<contract>> to design your tool contract.

[[tags]]
== Organize servers with tags

Tags are key-value metadata that help you organize, categorize, and filter your MCP servers. Use tags to track ownership, environment, cost allocation, or any other organizational dimension relevant to your team.

=== Common tagging strategies

[cols="1,2,2"]
|===
| Strategy | Description | Examples

| Ownership
| Track which team or individual owns the MCP server.
| `owner=platform-team`, `team=data-engineering`

| Environment
| Identify the deployment environment.
| `env=production`, `env=staging`, `env=development`

| Cost allocation
| Allocate costs to specific departments or projects.
| `cost-center=marketing`, `project=analytics`

| Purpose
| Describe the use case or data domain.
| `purpose=customer-data`, `use-case=real-time-alerts`
|===

=== Reserved tag names

The following tag names are reserved and cannot be used. These tags are system-managed:

* `service_account_id`: Automatically assigned to track the service account associated with the MCP server.
* `secret_id`: Automatically assigned to track the service account secret used by the MCP server.

=== Best practices

* Use consistent naming conventions across your organization (for example, always lowercase with hyphens or underscores).
* Document your tagging strategy so all team members use tags consistently.
* Use tags for filtering and searching MCP servers in the Cloud Console and API.
* Review and update tags periodically to keep them accurate as servers evolve.

[[contract]]
== Design the tool contract and MCP metadata

Each MCP tool must declare its interface using `meta.mcp` metadata. This metadata allows AI clients to discover and invoke the tool correctly.

Define a clear, stable interface for each tool. Keep the description task-oriented and keep properties to a minimum.

[source,yaml]
----
meta:
  mcp:
    enabled: true <1>
    description: "Publishes a message to a specified Redpanda topic" <2>
    properties: <3>
      - name: message
        type: string
        description: "The message content to publish"
        required: true
      - name: topic_name
        type: string
        description: "The Redpanda topic to publish to"
        required: true
----

<1> Set `meta.mcp.enabled: true` to expose the tool using MCP.
<2> A concise description that explains what the tool does. This should be understandable by an AI model.
<3> Define the properties that AI clients can provide when calling this tool.
+
Properties define the inputs that AI clients can provide when calling your tool. Each property has:

* **name**: The parameter name AI clients will use
* **type**: Data type (`string`, `number`, or `boolean`)
* **description**: Human-readable explanation of what this property does
* **required**: Whether the property is mandatory (`true`) or optional (`false`)

Property guidance:

* Use descriptive names that clearly indicate the property's purpose.
* Provide clear descriptions that explain both the purpose and any constraints.
* Mark only mandatory fields as required. Prefer optional properties with sensible defaults.
* Document default values in the description and implement them in your tool logic.
* Consider component type restrictions: `input` components only support a `count` property, `cache` components have no custom properties, and `output` components receive properties as arrays for batch operations.

After defining your tool contract, implement the logic to handle input validation, defaults, and the main processing steps.

[[provision-secrets]]
== Provision secrets

All credentials and sensitive values must be stored in the Redpanda Cloud xref:develop:connect/configuration/secret-management.adoc[Secrets Store].

=== Creating secrets in the Cloud Console

When you reference secrets in your tool's YAML configuration using `${secrets.SECRET_NAME}`, the Cloud Console automatically detects these references and provides an interface next to the configuration editor where you can:

. Enter the secret values directly
. Create the secrets in the Secrets Store with a single click

This inline secret creation workflow simplifies the development process by letting you configure secrets as you build your tools, without navigating away to the Secrets Store.

Alternatively, you can manually create and manage secrets directly in the xref:develop:connect/configuration/secret-management.adoc[Secrets Store].

=== Best practices

- Reference secrets as `${secrets.NAME}` in your YAML configuration.
- Never commit secrets to Git or reference them directly inline in configuration files.
- Use uppercase snakecase for secret names (such as `DATAPLANE_TOKEN`).
- Rotate secrets in the Secrets Store as needed.
- Only request the scopes/roles required by your tool (principle of least privilege).

See an example of using secrets in xref:ai-agents:mcp/remote/pipeline-patterns.adoc#secrets[MCP patterns].

[[pipeline-patterns]]
== Build your MCP tool

Use Redpanda Connect components to implement the logic of your MCP tool. Here are some best practices:

* **Single responsibility**: Each tool should do one thing well.
* **Descriptive naming**: Use clear, specific labels like `fetch-user-profile` instead of generic names like `get-data`. The top-level label becomes the tool's name in the MCP server.
* **Input validation**: Always validate and sanitize user inputs using xref:develop:connect/guides/bloblang/about.adoc[Bloblang].
* **Error handling**: Provide meaningful error messages.
* **Documentation**: Write clear descriptions that explain what the tool does and what it returns.

For common patterns and examples, see xref:ai-agents:mcp/remote/pipeline-patterns.adoc[].

Here's a complete example that demonstrates best practices:

[source,yaml]
----
include::ai-agents:example$weather_service.yaml[]
----

=== YAML configuration rules

Each YAML configuration (tool) should contain exactly one component type. The component type is inferred from the type you choose in the dropdown when creating or editing the MCP server. Valid component types are:

* xref:develop:connect/components/inputs/about.adoc[`input`] (for data sources)
* xref:develop:connect/components/outputs/about.adoc[`output`] (for data sinks)
* xref:develop:connect/components/processors/about.adoc[`processor`] (for data transformations and data access)
* xref:develop:connect/components/caches/about.adoc[`cache`] (for caching intermediate results)

=== Property restrictions by component type

Different component types have different property capabilities when exposed as MCP tools:

[cols="1,2,2"]
|===
| Component Type | Property Support | Details

| `input`
| Only supports `count` property
| AI clients can specify how many messages to read, but you cannot define custom properties.

| `cache`
| No custom properties
| Properties are hardcoded to `key` and `value` for cache operations.

| `output`
| Custom properties supported
| AI sees properties as an array for batch operations: `[{prop1, prop2}, {prop1, prop2}]`.

| `processor`
| Custom properties supported
| You can define any properties needed for data processing operations.
|===

=== Configuration examples

.Correct example
[source,yaml]
----
label: event-reader
redpanda:
  seed_brokers: [ "${REDPANDA_BROKERS}" ]
  topics: [ "events" ]
  consumer_group: "mcp-reader"

meta:
  mcp:
    enabled: true
    description: "Consume events from Redpanda"
----

.Correct example
[source,yaml]
----
label: fetch-example-data
processors:
  - label: safe_operation
    try:
      - http:
          url: "https://api.example.com/data"
          timeout: "10s"
      - mutation: |
          root = this.merge({"processed": true})

  - label: handle_errors
    catch:
      - mutation: |
          root = {
            "error": "Operation failed",
            "details": error()
          }
----

.Incorrect (do not include the input wrapper)
[source,yaml]
----
label: incorrect-example
input:
  redpanda:
    seed_brokers: [ "${REDPANDA_BROKERS}" ]
    topics: [ "events" ]
----

.Incorrect (multiple component types in one file)
[source,yaml]
----
label: incorrect-example
input:
  redpanda: { ... }
processors:
  - mutation: { ... }
output:
  redpanda: { ... }
----

[[lint]]
== Lint and deploy your MCP server

=== Lint your configuration

Before deploying, validate your YAML configuration to catch syntax errors and schema violations:

. In the Redpanda Cloud Console, after entering your YAML configuration, click *Lint*.
. The linter checks for:
+
* Valid YAML syntax
* Correct Redpanda Connect component schemas
* Required MCP metadata fields
* Secret reference formatting
* Component configuration completeness

. Fix any errors shown in the linting output before proceeding to deployment.
. A successful lint shows no errors and confirms your configuration is ready to deploy.

TIP: Always lint your configuration after making changes. This catches issues early and prevents deployment failures.

=== Deploy your MCP server

. Click *Create MCP Server* to deploy the server.
. Monitor the *Status* column. It will show one of:
+
* *Starting*: Server is being deployed.
* *Running*: Server is active and ready to receive requests.
* *Error*: Check logs for deployment issues.

=== Test with MCP Inspector

. When your server status shows *Running*, click on the server name.
. Navigate to the *MCP Inspector* tab.
. This built-in tool lets you:
+
* View all available tools your server exposes.
* Test tool calls with sample parameters.
* See request/response data.
* Debug issues without setting up external clients.

=== Manage your MCP server

From the MCP Servers list, you can:

* *View logs*: Click the server name, then go to the *Logs* tab to see execution logs and errors.
* *Update configuration*: Edit the YAML and redeploy.
* *Start/Stop*: Control server lifecycle.
* *Delete*: Remove the server and clean up resources.

See xref:ai-agents:mcp/remote/admin-guide.adoc[].

[[test]]
== Authenticate and connect your MCP client

To connect your local MCP client to your MCP server:

. First, authenticate to Redpanda Cloud:
+
[source,bash]
----
rpk cloud login
----
+
This opens a browser window for sign-in and stores your authentication token locally.

. Install the MCP proxy for your client (Claude/Claude Code).
+
For BYOC and Dedicated clusters, use:
+
[,bash]
----
rpk cloud mcp proxy \
--cluster-id <cluster-id> \ <1>
--mcp-server-id <server-id> \ <2>
--install --client claude-code
----
+
For Serverless clusters, use:
+
[,bash]
----
rpk cloud mcp proxy \
--serverless-cluster-id <cluster-id> \ <1>
--mcp-server-id <server-id> \ <2>
--install --client claude-code
----
+
--
<1> The target Redpanda Cloud cluster ID where your MCP server is hosted.
<2> The unique ID of your deployed MCP server
--
+
TIP: You can find this command and the IDs in the *Connection* tab of your MCP server in Redpanda Cloud.

The proxy acts as a bridge between your local client and the MCP server running in your cluster. It:

* Connects to your MCP server using your authentication token
* Discovers and registers all tools from the Remote server locally
* Proxies MCP requests from your client to the Remote server
* Handles authentication by injecting your token into each request

. Restart your client and invoke your tool.

:note-caption: Building your own agent?

[NOTE]
====
You can implement the auth workflow directly against Redpanda Cloud APIs and skip the use of `rpk`. The proxy is a convenience, not a requirement of Remote MCP. For code examples, see the *Connection* tab in your MCP server in Redpanda Cloud.
====

:note-caption: Note

[[observe]]
== Observe and debug your MCP tools

You can view execution logs in the Redpanda Cloud Console under your MCP server's *Logs* tab.

== Suggested reading

* xref:develop:connect/components/about.adoc[Redpanda Connect components reference]
* xref:develop:connect/guides/bloblang/about.adoc[Bloblang language guide]
* xref:develop:connect/configuration/secret-management.adoc[Secret management in Redpanda Connect]
* xref:reference:rpk/rpk-cloud/rpk-cloud-login.adoc[`rpk cloud login` command reference]
* xref:reference:rpk/rpk-cloud/rpk-cloud-mcp-proxy.adoc[`rpk cloud mcp proxy` command reference]
