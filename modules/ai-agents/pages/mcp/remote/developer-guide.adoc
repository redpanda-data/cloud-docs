= Build Remote MCP Servers in Redpanda Cloud
:page-beta: true
:description: Learn how to write and deploy remote MCP servers in Redpanda Cloud. This guide covers concepts, patterns, and best practices.

include::ai-agents:partial$beta.adoc[]

This guide teaches you how to build xref:ai-agents:mcp/remote/overview.adoc[remote MCP servers] that are managed in Redpanda Cloud. Remote MCP servers run inside your Redpanda Cloud cluster and expose tools that AI clients can call using MCP.

== Prerequisites

* Access to a Redpanda Cloud cluster
* Ability to manage the xref:develop:connect/configuration/secret-management.adoc[Secrets Store] entries
* At least version 25.2.5 of xref:manage:rpk/rpk-install.adoc[`rpk` installed on your computer]
* (Optional) An AI assistant like Claude or Claude Code for testing

TIP: For a quickstart, see xref:ai-agents:mcp/remote/quickstart.adoc[].

You should also be familiar with YAML, HTTP APIs, and basic event-stream processing concepts.

== Concepts and architecture

Remote MCP server:: A managed, hosted MCP service deployed to your cluster. You write tool logic as Redpanda Connect pipelines and annotate them with MCP metadata so clients can discover and invoke them.

Redpanda Connect:: A framework for building event-driven data pipelines. Tools inside your remote MCP servers are implemented as Redpanda Connect pipelines that run inside your Redpanda Cloud cluster.

Tool:: A single request/response operation exposed to MCP. Each tool is implemented as a Redpanda Connect pipeline and described to MCP with `meta.mcp`.

Secrets:: Credentials and tokens must be stored in the Secrets Store and referenced as `${secrets.NAME}`. Use uppercase snakecase for secret names (such as `DATAPLANE_TOKEN`).

== Development workflow

. <<access, Access your Redpanda Cloud cluster>>: Select a Redpanda Cloud cluster to host your MCP server.
. <<contract, Design the tool contract>>: Annotate MCP metadata with `meta.mcp.enabled: true`, provide a concise description, and declare parameters.
. <<provision-secrets, Provision secrets (optional)>>: Create secrets in the Secrets Store for any credentials. Never inline secrets in YAML.
. <<pipeline-patterns, Implement the pipeline>>: Build an MCP tool using Redpanda Connect pipelines.
. <<lint, Lint and deploy>>: Validate your pipeline, catch schema errors, then deploy and test with the MCP Inspector.
. <<test, Authenticate and connect your MCP client>>: Install a proxy entry with `rpk cloud mcp proxy` in your AI assistant MCP configuration, or connect with your own MCP client.
. <<observe, Observe and debug>>: Add temporary `log` processors, adjust timeouts/retries, and right-size resources.

[[access]]
== Access MCP Servers in Redpanda Cloud

. Log into your link:https://cloud.redpanda.com[Redpanda Cloud Console^].
. Select your cluster from the cluster list.
. In the left sidebar, navigate to *Remote MCP*.
. If this is your first MCP server, you'll see an empty list with a *Create MCP Server* button.
. Fill in the required fields:
+
* *Name*: A unique identifier for your server (for example `weather-tool`, `customer-lookup`).
* *Description*: Brief description of what your server does.
* *Configuration*: This is where to put your YAML configuration to define the an MCP tool.

[[contract]]
== Design the tool contract and MCP metadata

Each MCP tool must declare its interface using `meta.mcp` metadata. This metadata allows AI clients to discover and invoke the tool correctly.

Define a clear, stable interface for each tool. Keep the description task-oriented and keep parameters to a minimum.

[source,yaml]
----
meta:
  mcp:
    enabled: true <1>
    description: "Fetches a compact summary from an external API using two optional parameters." <2>
    properties: <3>
      - name: parameter1
        type: string
        description: "Primary filter; defaults to provider standard when omitted."
        required: false
      - name: parameter2
        type: number
        description: "Limit of results (1-100)."
        required: false
----

<1> Set `meta.mcp.enabled: true` to expose the tool using MCP.
<2> A concise description that explains what the tool does. This should be understandable by an AI model.
<3> List the input parameters (properties) for the tool.
+
Property guidance:
+
* Use `string`, `number`, or `boolean` types.
* Validate ranges and enums using xref:guides:bloblang/about.adoc[Bloblang] inside the pipeline.
* Mark only mandatory fields as required.
* Document defaults in the `description` and enforce them in the pipeline.

After defining your tool contract, implement the pipeline logic to handle input validation, defaults, and the main processing steps.

[[provision-secrets]]
== Provision secrets

All credentials and sensitive values must be stored in the Redpanda Cloud xref:develop:connect/configuration/secret-management.adoc[Secrets Store]. Follow these best practices:

- Reference secrets as `${secrets.NAME}` in your pipeline YAML.
- Never commit secrets to Git or reference them directly inline in configuration files.
- Use uppercase snakecase for secret names (such as `DATAPLANE_TOKEN`).
- Rotate secrets in the Secrets Store as needed.
- Only request the scopes/roles required by your tool (principle of least privilege).

See an example of using secrets in xref:ai-agents:mcp/remote/pipeline-patterns.adoc#secrets[Pipeline patterns].

[[pipeline-patterns]]
== Implement the pipeline

Use Redpanda Connect components to implement the logic of your MCP tool. Here are some best practices:

* **Single responsibility**: Each tool should do one thing well.
* **Descriptive naming**: Use clear, specific labels like `fetch-user-profile` instead of generic names like `get-data`. The top-level label becomes the tool's name in the MCP server.
* **Input validation**: Always validate and sanitize user inputs using xref:develop:connect/guides/bloblang/about.adoc[Bloblang].
* **Error handling**: Provide meaningful error messages.
* **Documentation**: Write clear descriptions that explain what the tool does and what it returns.

For common patterns and examples, see xref:ai-agents:mcp/remote/pipeline-patterns.adoc[].

Here's a complete example that demonstrates best practices:

[source,yaml]
----
include::ai-agents:example$weather_service.yaml[]
----

=== YAML configuration rules

Each YAML configuration (tool) should contain exactly one component type. The component type is inferred from the type you choose in the dropdown when creating or editing the MCP server. Valid component types are:

* xref:develop:connect/components/inputs/about.adoc[`input`] (for data sources)
* xref:develop:connect/components/outputs/about.adoc[`output`] (for data sinks)
* xref:develop:connect/components/processors/about.adoc[`processor`] (for data transformations and data access)
* xref:develop:connect/components/caches/about.adoc[`cache`] (for caching intermediate results)

.Correct example
[source,yaml]
----
label: event-reader
redpanda:
  seed_brokers: [ "${REDPANDA_BROKERS}" ]
  topics: [ "events" ]
  consumer_group: "mcp-reader"

meta:
  mcp:
    enabled: true
    description: "Consume events from Redpanda"
----

.Correct example
[source,yaml]
----
label: fetch-example-data
processors:
  - label: safe_operation
    try:
      - http:
          url: "https://api.example.com/data"
          timeout: "10s"
      - mutation: |
          root = this.merge({"processed": true})

  - label: handle_errors
    catch:
      - mutation: |
          root = {
            "error": "Operation failed",
            "details": error()
          }
----

.Incorrect (do not include the input wrapper)
[source,yaml]
----
label: incorrect-example
input:
  redpanda:
    seed_brokers: [ "${REDPANDA_BROKERS}" ]
    topics: [ "events" ]
----

.Incorrect (multiple component types in one file)
[source,yaml]
----
label: incorrect-example
input:
  redpanda: { ... }
processors:
  - mutation: { ... }
output:
  redpanda: { ... }
----

[[lint]]
== Deploy and test your MCP server

When your pipeline is ready, deploy it as a remote MCP server in Redpanda Cloud and test it with the built-in MCP Inspector.

=== Deploy your MCP server

. Click *Create MCP Server* to deploy the server.
. Monitor the *Status* column. It will show one of:
+
* *Starting*: Server is being deployed.
* *Running*: Server is active and ready to receive requests.
* *Error*: Check logs for deployment issues.

=== Test with MCP Inspector

. When your server status shows *Running*, click on the server name.
. Navigate to the *MCP Inspector* tab.
. This built-in tool lets you:
+
* View all available tools your server exposes.
* Test tool calls with sample parameters.
* See request/response data.
* Debug issues without setting up external clients.

=== Manage your MCP server

From the MCP Servers list, you can:

* *View logs*: Click the server name, then go to the *Logs* tab to see execution logs and errors.
* *Update configuration*: Edit the YAML and redeploy.
* *Start/Stop*: Control server lifecycle.
* *Delete*: Remove the server and clean up resources.

See xref:ai-agents:mcp/remote/admin-guide.adoc[].

[[test]]
== Authenticate and connect your MCP client

To connect your local MCP client to your remote MCP server:

. First, authenticate to Redpanda Cloud:
+
[source,bash]
----
rpk cloud login
----
+
This opens a browser window for sign-in and stores your authentication token locally.

. Install the MCP proxy for your client (Claude/Claude Code).
+
For BYOC and Dedicated clusters, use:
+
[,bash]
----
rpk cloud mcp proxy \
--cluster-id <cluster-id> \ <1>
--mcp-server-id <server-id> \ <2>
--install --client claude-code
----
+
For Serverless clusters, use:
+
[,bash]
----
rpk cloud mcp proxy \
--serverless-cluster-id <cluster-id> \ <1>
--mcp-server-id <server-id> \ <2>
--install --client claude-code
----
+
--
<1> The target Redpanda Cloud cluster ID where your remote MCP server is hosted.
<2> The unique ID of your deployed remote MCP server
--
+
TIP: You can find this command and the IDs in the *Connection* tab of your MCP server in Redpanda Cloud.
+
The proxy acts as a bridge between your local client and the remote MCP server running in your cluster. It:
+
* Connects to your remote MCP server using your authentication token
* Discovers and registers all tools from the remote server locally
* Proxies MCP requests from your client to the remote server
* Handles authentication by injecting your token into each request

. Restart your client and invoke your tool.

:note-caption: Building your own agent?

[NOTE]
====
You can implement the auth workflow directly against Redpanda Cloud APIs and skip the use of `rpk`. The proxy is a convenience, not a requirement of remote MCP. For code examples, see the *Connection* tab in your MCP server in Redpanda Cloud.
====

:note-caption: Note

[[observe]]
== Observe and debug your MCP tools

You can view execution logs in the Redpanda Cloud Console under your MCP server's *Logs* tab.

== Suggested reading

* xref:develop:connect/components/about.adoc[Redpanda Connect components reference]
* xref:develop:connect/guides/bloblang/about.adoc[Bloblang language guide]
* xref:develop:connect/configuration/secret-management.adoc[Secret management in Redpanda Connect]
* xref:reference:rpk/rpk-cloud/rpk-cloud-login.adoc[`rpk cloud login` command reference]
* xref:reference:rpk/rpk-cloud/rpk-cloud-mcp-proxy.adoc[`rpk cloud mcp proxy` command reference]
