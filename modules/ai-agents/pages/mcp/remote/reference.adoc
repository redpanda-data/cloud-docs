= MCP Tool Configuration Reference
:description: Reference documentation for MCP tool configuration, secrets, tags, and YAML rules.
:page-topic-type: reference
:personas: ai_agent_developer, streaming_platform_developer, platform_engineer_sre
// Reader journey: "I need to check the spec"
// Learning objectives - what readers can do with this reference:
:learning-objective-1: Look up required and optional fields in the `meta.mcp` block
:learning-objective-2: Find the YAML structure rules for each component type
:learning-objective-3: Identify which properties are restricted by component type
:learning-objective-4: Find the syntax for referencing secrets
:learning-objective-5: Look up reserved tag names
:learning-objective-6: Find the trace field specifications

This page provides reference documentation for building and configuring MCP tools in Redpanda Cloud.

Use this reference to:

* [ ] {learning-objective-1}
* [ ] {learning-objective-2}
* [ ] {learning-objective-3}
* [ ] {learning-objective-4}
* [ ] {learning-objective-5}
* [ ] {learning-objective-6}

[[contract]]
== Tool contract and MCP metadata

include::redpanda-connect:ai-agents:partial$mcp/tool-contract-guidance.adoc[]

[[yaml-rules]]
== YAML configuration rules

include::redpanda-connect:ai-agents:partial$mcp/yaml-config-rules-cloud.adoc[]

[[property-restrictions]]
== Property restrictions by component type

include::redpanda-connect:ai-agents:partial$mcp/property-restrictions-table.adoc[]

[[secrets]]
== Secrets reference syntax

Reference secrets from the Secrets Store using interpolation syntax:

[,yaml]
----
${secrets.SECRET_NAME}
----

Secret names must use uppercase snake_case (for example, `DATAPLANE_TOKEN`, `API_KEY`).

For an example, see xref:ai-agents:mcp/remote/tool-patterns.adoc#secrets[MCP patterns]. For secrets best practices, see xref:ai-agents:mcp/remote/best-practices.adoc#secrets[Best practices].

[[tags]]
== Tags

Tags are key-value metadata for organizing MCP servers. You can add custom tags to help with:

* Billing and cost allocation
* Environment identification (for example, `env:production`, `env:staging`)
* Team or project ownership

=== Reserved tag names

The following tag names are reserved and system-managed:

[cols="1,2"]
|===
| Tag | Description

| `service_account_id`
| Tracks the service account associated with the MCP server.

| `secret_id`
| Tracks the service account secret used by the MCP server.
|===

For tagging strategies and best practices, see xref:ai-agents:mcp/remote/best-practices.adoc#tags[Best practices].

[[trace-data-structure]]
== Trace data structure

MCP servers emit OpenTelemetry traces to the `redpanda.otel_traces` topic. For conceptual background on traces and spans, see xref:ai-agents:mcp/remote/concepts.adoc#execution-log[Execution log and observability].

Each trace message contains an OpenTelemetry span with the following structure:

[,json]
----
{
  "traceId": "71cad555b35602fbb35f035d6114db54",
  "spanId": "43ad6bc31a826afd",
  "parentSpanId": "",
  "name": "http_processor",
  "kind": 1,
  "startTimeUnixNano": "1765198415253280028",
  "endTimeUnixNano": "1765198424660663434",
  "attributes": [
    {
      "key": "city_name",
      "value": {"stringValue": "london"}
    },
    {
      "key": "result_length",
      "value": {"intValue": "198"}
    }
  ],
  "status": {
    "code": 0,
    "message": ""
  },
  "instrumentationScope": {
    "name": "rpcn-mcp"
  },
  "flags": 1
}
----

=== Field reference

[cols="1,1,3"]
|===
| Field | Type | Description

| `traceId`
| string (hex)
| Unique identifier for the entire trace.

| `spanId`
| string (hex)
| Unique identifier for this specific span.

| `parentSpanId`
| string (hex)
| Links child spans to parent operations. Empty string if root span.

| `name`
| string
| Descriptive name of the operation. For MCP tools, this is the tool name.

| `kind`
| integer
| Span kind. See the `redpanda.otel_traces-value` schema for details.

| `startTimeUnixNano`
| string
| Start time in nanoseconds since Unix epoch.

| `endTimeUnixNano`
| string
| End time in nanoseconds since Unix epoch.

| `attributes`
| array
| Key-value pairs with contextual information about the operation.

| `status.code`
| integer
| Operation status: `0` = OK, `2` = ERROR.

| `status.message`
| string
| Optional error message when `status.code` is `2`.

| `instrumentationScope.name`
| string
| Identifies the component that created the span. `rpcn-mcp` for MCP tools, `redpanda-connect` for internal processing.

| `flags`
| integer
| Trace flags.
|===

=== MCP tool span values

MCP tool spans have these distinguishing field values:

[cols="1,2"]
|===
| Field | Value

| `instrumentationScope.name`
| `rpcn-mcp`

| `name`
| The tool name (for example, `weather`, `http_processor`)

| `parentSpanId`
| Empty string (root span)
|===

Internal processing spans use `instrumentationScope.name: redpanda-connect` and have a non-empty `parentSpanId` referencing the parent tool span.

=== Duration formula

Duration in milliseconds:

[,text]
----
(endTimeUnixNano - startTimeUnixNano) / 1000000
----

== Next steps

Continue your learning journey with these resources:

* xref:ai-agents:mcp/remote/best-practices.adoc[]: Learn input validation, error handling, and response formatting
* xref:ai-agents:mcp/remote/tool-patterns.adoc[]: Find reusable patterns for common scenarios
* xref:ai-agents:mcp/remote/troubleshooting.adoc[]: Diagnose and fix common issues
* xref:develop:connect/components/about.adoc[Redpanda Connect components reference]
* xref:develop:connect/guides/bloblang/about.adoc[Bloblang language guide]
* link:https://docs.anthropic.com/en/docs/mcp[Model Context Protocol documentation^]
